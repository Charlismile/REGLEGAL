@* @page "/ListadoComite" *@
@* @using REGISTROLEGAL.DTOs *@
@* @using SISTEMALEGAL.Repositories.Interfaces *@
@* *@
@* <div class="container-fluid"> *@
@*     <div class="row"> *@
@*         <div class="col-12"> *@
@*             <div class="card"> *@
@*                 <div class="card-header d-flex justify-content-between align-items-center"> *@
@*                     <h3 class="mb-0"> *@
@*                         <i class="fas fa-users"></i> Gestión de Comités de Salud *@
@*                     </h3> *@
@*                     <a href="/comites/registro" class="btn btn-primary"> *@
@*                         <i class="fas fa-plus"></i> Nuevo Registro *@
@*                     </a> *@
@*                 </div> *@
@* *@
@*                 <div class="card-body"> *@
@*                     <!-- Filtros y Búsqueda --> *@
@*                     <div class="row mb-4"> *@
@*                         <div class="col-md-6"> *@
@*                             <div class="input-group"> *@
@*                                 <span class="input-group-text"> *@
@*                                     <i class="fas fa-search"></i> *@
@*                                 </span> *@
@*                                 <input type="text" class="form-control" placeholder="Buscar por nombre, comunidad o miembro..."  *@
@*                                        @bind="terminoBusqueda" @onkeypress="OnBusquedaKeyPress" /> *@
@*                                 <button class="btn btn-outline-secondary" @onclick="BuscarComites"> *@
@*                                     Buscar *@
@*                                 </button> *@
@*                             </div> *@
@*                         </div> *@
@*                         <div class="col-md-6 text-end"> *@
@*                             <button class="btn btn-outline-primary me-2" @onclick="CargarComites"> *@
@*                                 <i class="fas fa-sync-alt"></i> Actualizar *@
@*                             </button> *@
@*                             <span class="badge bg-info fs-6"> *@
@*                                 Total: @comites.Count registro(s) *@
@*                             </span> *@
@*                         </div> *@
@*                     </div> *@
@* *@
@*                     @if (cargando) *@
@*                     { *@
@*                         <div class="text-center p-5"> *@
@*                             <div class="spinner-border text-primary" role="status"> *@
@*                                 <span class="visually-hidden">Cargando...</span> *@
@*                             </div> *@
@*                             <p class="mt-2">Cargando comités...</p> *@
@*                         </div> *@
@*                     } *@
@*                     else if (!string.IsNullOrEmpty(mensajeError)) *@
@*                     { *@
@*                         <div class="alert alert-danger"> *@
@*                             <i class="fas fa-exclamation-circle"></i> *@
@*                             @mensajeError *@
@*                         </div> *@
@*                     } *@
@*                     else if (!comites.Any()) *@
@*                     { *@
@*                         <div class="text-center p-5"> *@
@*                             <i class="fas fa-inbox fa-3x text-muted mb-3"></i> *@
@*                             <h5 class="text-muted">No hay comités registrados</h5> *@
@*                             <p class="text-muted">Comience creando un nuevo registro de comité</p> *@
@*                             <a href="/comites/registro" class="btn btn-primary"> *@
@*                                 <i class="fas fa-plus"></i> Crear Primer Registro *@
@*                             </a> *@
@*                         </div> *@
@*                     } *@
@*                     else *@
@*                     { *@
@*                         <!-- Tabla de Comités --> *@
@*                         <div class="table-responsive"> *@
@*                             <table class="table table-hover"> *@
@*                                 <thead class="table-dark"> *@
@*                                     <tr> *@
@*                                         <th>Comité</th> *@
@*                                         <th>Comunidad</th> *@
@*                                         <th>Ubicación</th> *@
@*                                         <th>Trámite</th> *@
@*                                         <th>Miembros</th> *@
@*                                         <th>Archivos</th> *@
@*                                         <th>Fecha Registro</th> *@
@*                                         <th class="text-center">Acciones</th> *@
@*                                     </tr> *@
@*                                 </thead> *@
@*                                 <tbody> *@
@*                                     @foreach (var comite in comitesPaginados) *@
@*                                     { *@
@*                                         <tr> *@
@*                                             <td> *@
@*                                                 <strong>@comite.NombreComiteSalud</strong> *@
@*                                             </td> *@
@*                                             <td>@comite.Comunidad</td> *@
@*                                             <td> *@
@*                                                 <small class="text-muted"> *@
@*                                                     @($"{comite.RegionNombre} - {comite.ProvinciaNombre}") *@
@*                                                     <br /> *@
@*                                                     @($"{comite.DistritoNombre}, {comite.CorregimientoNombre}") *@
@*                                                 </small> *@
@*                                             </td> *@
@*                                             <td> *@
@*                                                 <span class="badge bg-secondary"> *@
@*                                                     @comite.TramiteNombre *@
@*                                                 </span> *@
@*                                             </td> *@
@*                                             <td> *@
@*                                                 <span class="badge bg-info"> *@
@*                                                     @comite.Miembros.Count miembro(s) *@
@*                                                 </span> *@
@*                                                 @if (comite.Miembros.Any()) *@
@*                                                 { *@
@*                                                     <br /> *@
@*                                                     <small class="text-muted"> *@
@*                                                         @string.Join(", ", comite.Miembros.Take(2).Select(m => m.Nombre)) *@
@*                                                         @if (comite.Miembros.Count > 2) *@
@*                                                         { *@
@*                                                             <text>...</text> *@
@*                                                         } *@
@*                                                     </small> *@
@*                                                 } *@
@*                                             </td> *@
@*                                             <td> *@
@*                                                 @if (comite.Archivos.Any()) *@
@*                                                 { *@
@*                                                     <span class="badge bg-success"> *@
@*                                                         @comite.Archivos.Count archivo(s) *@
@*                                                     </span> *@
@*                                                 } *@
@*                                                 else *@
@*                                                 { *@
@*                                                     <span class="text-muted">Sin archivos</span> *@
@*                                                 } *@
@*                                             </td> *@
@*                                             <td> *@
@*                                                 <small> *@
@*                                                     @comite.FechaCreacion.ToString("dd/MM/yyyy") *@
@*                                                     <br /> *@
@*                                                     @comite.FechaCreacion.ToString("HH:mm") *@
@*                                                 </small> *@
@*                                             </td> *@
@*                                             <td class="text-center"> *@
@*                                                 <div class="btn-group" role="group"> *@
@*                                                     <button type="button" class="btn btn-sm btn-outline-primary"  *@
@*                                                             @onclick="() => VerDetalles(comite.Id)"  *@
@*                                                             title="Ver detalles"> *@
@*                                                         <i class="fas fa-eye"></i> *@
@*                                                     </button> *@
@*                                                     <a href="/comites/editar/@comite.Id"  *@
@*                                                        class="btn btn-sm btn-outline-warning"  *@
@*                                                        title="Editar"> *@
@*                                                         <i class="fas fa-edit"></i> *@
@*                                                     </a> *@
@*                                                     <button type="button" class="btn btn-sm btn-outline-danger"  *@
@*                                                             @onclick="() => ConfirmarEliminacion(comite)"  *@
@*                                                             title="Eliminar"> *@
@*                                                         <i class="fas fa-trash"></i> *@
@*                                                     </button> *@
@*                                                 </div> *@
@*                                             </td> *@
@*                                         </tr> *@
@*                                     } *@
@*                                 </tbody> *@
@*                             </table> *@
@*                         </div> *@
@* *@
@*                         <!-- Paginación --> *@
@*                         @if (totalPaginas > 1) *@
@*                         { *@
@*                             <nav aria-label="Paginación de comités"> *@
@*                                 <ul class="pagination justify-content-center"> *@
@*                                     <li class="page-item @(paginaActual == 1 ? "disabled" : "")"> *@
@*                                         <button class="page-link" @onclick="() => CambiarPagina(paginaActual - 1)"> *@
@*                                             <i class="fas fa-chevron-left"></i> *@
@*                                         </button> *@
@*                                     </li> *@
@* *@
@*                                     @for (int i = Math.Max(1, paginaActual - 2); i <= Math.Min(totalPaginas, paginaActual + 2); i++) *@
@*                                     { *@
@*                                         <li class="page-item @(i == paginaActual ? "active" : "")"> *@
@*                                             <button class="page-link" @onclick="() => CambiarPagina(i)"> *@
@*                                                 @i *@
@*                                             </button> *@
@*                                         </li> *@
@*                                     } *@
@* *@
@*                                     <li class="page-item @(paginaActual == totalPaginas ? "disabled" : "")"> *@
@*                                         <button class="page-link" @onclick="() => CambiarPagina(paginaActual + 1)"> *@
@*                                             <i class="fas fa-chevron-right"></i> *@
@*                                         </button> *@
@*                                     </li> *@
@*                                 </ul> *@
@*                             </nav> *@
@*                         } *@
@*                     } *@
@*                 </div> *@
@*             </div> *@
@*         </div> *@
@*     </div> *@
@* </div> *@
@* *@
@* <!-- Modal de Detalles --> *@
@* @if (comiteSeleccionado != null && mostrarModalDetalles) *@
@* { *@
@*     <div class="modal fade show d-block" tabindex="-1" style="background-color: rgba(0,0,0,0.5);"> *@
@*         <div class="modal-dialog modal-xl"> *@
@*             <div class="modal-content"> *@
@*                 <div class="modal-header"> *@
@*                     <h5 class="modal-title"> *@
@*                         <i class="fas fa-info-circle"></i> Detalles del Comité *@
@*                     </h5> *@
@*                     <button type="button" class="btn-close" @onclick="() => mostrarModalDetalles = false"></button> *@
@*                 </div> *@
@*                 <div class="modal-body"> *@
@*                     <div class="row"> *@
@*                         <div class="col-md-6"> *@
@*                             <h6 class="fw-bold">Información General</h6> *@
@*                             <table class="table table-sm"> *@
@*                                 <tr> *@
@*                                     <td><strong>Nombre:</strong></td> *@
@*                                     <td>@comiteSeleccionado.NombreComiteSalud</td> *@
@*                                 </tr> *@
@*                                 <tr> *@
@*                                     <td><strong>Comunidad:</strong></td> *@
@*                                     <td>@comiteSeleccion *@
@*                                     <td>@comiteSeleccionado.Comunidad</td> *@
@*                                 </tr> *@
@*                                 <tr> *@
@*                                     <td><strong>Ubicación:</strong></td> *@
@*                                     <td> *@
@*                                         @comiteSeleccionado.RegionNombre - @comiteSeleccionado.ProvinciaNombre <br /> *@
@*                                         @comiteSeleccionado.DistritoNombre, @comiteSeleccionado.CorregimientoNombre *@
@*                                     </td> *@
@*                                 </tr> *@
@*                                 <tr> *@
@*                                     <td><strong>Trámite:</strong></td> *@
@*                                     <td>@comiteSeleccionado.TramiteNombre</td> *@
@*                                 </tr> *@
@*                                 <tr> *@
@*                                     <td><strong>Fecha de Registro:</strong></td> *@
@*                                     <td> *@
@*                                         @comiteSeleccionado.FechaCreacion.ToString("dd/MM/yyyy HH:mm") *@
@*                                     </td> *@
@*                                 </tr> *@
@*                             </table> *@
@*                         </div> *@
@*                         <div class="col-md-6"> *@
@*                             <h6 class="fw-bold">Miembros del Comité</h6> *@
@*                             @if (comiteSeleccionado.Miembros?.Any() == true) *@
@*                             { *@
@*                                 <ul class="list-group list-group-flush"> *@
@*                                     @foreach (var miembro in comiteSeleccionado.Miembros) *@
@*                                     { *@
@*                                         <li class="list-group-item"> *@
@*                                             <i class="fas fa-user"></i> @miembro.Nombre *@
@*                                         </li> *@
@*                                     } *@
@*                                 </ul> *@
@*                             } *@
@*                             else *@
@*                             { *@
@*                                 <p class="text-muted">No se han registrado miembros.</p> *@
@*                             } *@
@* *@
@*                             <h6 class="fw-bold mt-4">Archivos Adjuntos</h6> *@
@*                             @if (comiteSeleccionado.Archivos?.Any() == true) *@
@*                             { *@
@*                                 <ul class="list-group list-group-flush"> *@
@*                                     @foreach (var archivo in comiteSeleccionado.Archivos) *@
@*                                     { *@
@*                                         <li class="list-group-item"> *@
@*                                             <i class="fas fa-file"></i> *@
@*                                             <a href="@archivo.Url" target="_blank">@archivo.Nombre</a> *@
@*                                         </li> *@
@*                                     } *@
@*                                 </ul> *@
@*                             } *@
@*                             else *@
@*                             { *@
@*                                 <p class="text-muted">No hay archivos disponibles.</p> *@
@*                             } *@
@*                         </div> *@
@*                     </div> *@
@*                 </div> *@
@*                 <div class="modal-footer"> *@
@*                     <button class="btn btn-secondary" @onclick="() => mostrarModalDetalles = false"> *@
@*                         Cerrar *@
@*                     </button> *@
@*                 </div> *@
@*             </div> *@
@*         </div> *@
@*     </div> *@
@* } *@
@* *@
@* @code { *@
@*      *@
@* } *@
